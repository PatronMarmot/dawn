<!DOCTYPE html>\n<html lang=\"tr\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Epic Card Battle - Modern Socket.io</title>\n    <style>\n        * { margin: 0; padding: 0; box-sizing: border-box; }\n        body {\n            font-family: 'Segoe UI', system-ui, sans-serif;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            color: white; min-height: 100vh;\n        }\n        .container { max-width: 1200px; margin: 0 auto; padding: 2rem; }\n        .header { text-align: center; margin-bottom: 3rem; }\n        .title {\n            font-size: 3rem; font-weight: bold;\n            background: linear-gradient(45deg, #ffd700, #ff6b6b);\n            -webkit-background-clip: text; -webkit-text-fill-color: transparent;\n            margin-bottom: 1rem;\n        }\n        .connection-status {\n            display: inline-flex; align-items: center; gap: 0.5rem;\n            padding: 0.5rem 1rem; background: rgba(0,0,0,0.2);\n            border-radius: 25px; font-size: 0.9rem;\n        }\n        .status-dot {\n            width: 10px; height: 10px; border-radius: 50%;\n            background: #ef4444; animation: pulse 2s infinite;\n        }\n        .status-dot.connected { background: #10b981; }\n        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }\n        .main-menu {\n            display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n            gap: 2rem; margin-bottom: 3rem;\n        }\n        .menu-card {\n            background: rgba(255,255,255,0.1); backdrop-filter: blur(10px);\n            border-radius: 20px; padding: 2rem; text-align: center;\n            transition: all 0.3s ease; border: 1px solid rgba(255,255,255,0.2);\n        }\n        .menu-card:hover { transform: translateY(-5px); box-shadow: 0 20px 40px rgba(0,0,0,0.3); }\n        .menu-card h3 { font-size: 1.5rem; margin-bottom: 1rem; }\n        .menu-card p { opacity: 0.8; margin-bottom: 1.5rem; line-height: 1.6; }\n        .btn {\n            background: linear-gradient(45deg, #6366f1, #8b5cf6); color: white;\n            border: none; padding: 0.75rem 1.5rem; border-radius: 10px;\n            font-size: 1rem; font-weight: 600; cursor: pointer;\n            transition: all 0.3s ease; text-transform: uppercase; margin: 0.25rem;\n        }\n        .btn:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(99, 102, 241, 0.4); }\n        .btn-primary { background: linear-gradient(45deg, #10b981, #059669); }\n        .btn-secondary { background: linear-gradient(45deg, #f59e0b, #d97706); }\n        .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }\n        .input {\n            width: 100%; padding: 0.75rem; border: 2px solid rgba(255,255,255,0.2);\n            border-radius: 10px; background: rgba(255,255,255,0.1); color: white;\n            font-size: 1rem; margin: 0.5rem 0; text-align: center; text-transform: uppercase;\n        }\n        .input::placeholder { color: rgba(255,255,255,0.6); }\n        .input:focus { outline: none; border-color: #6366f1; box-shadow: 0 0 20px rgba(99, 102, 241, 0.3); }\n        .modal {\n            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;\n            background: rgba(0,0,0,0.8); backdrop-filter: blur(5px); z-index: 1000;\n            justify-content: center; align-items: center;\n        }\n        .modal-content {\n            background: rgba(255,255,255,0.1); backdrop-filter: blur(20px);\n            border-radius: 20px; padding: 2rem; max-width: 500px; width: 90%;\n            text-align: center; border: 1px solid rgba(255,255,255,0.2); position: relative;\n        }\n        .close-btn {\n            position: absolute; top: 1rem; right: 1rem; background: none;\n            border: none; color: white; font-size: 1.5rem; cursor: pointer; opacity: 0.7;\n        }\n        .list { max-height: 300px; overflow-y: auto; margin: 1rem 0; }\n        .list-item {\n            background: rgba(255,255,255,0.1); border-radius: 10px; padding: 1rem;\n            margin: 0.5rem 0; display: flex; justify-content: space-between;\n            align-items: center; transition: all 0.3s ease;\n        }\n        .spinner {\n            width: 40px; height: 40px; border: 4px solid rgba(255,255,255,0.3);\n            border-left-color: #6366f1; border-radius: 50%;\n            animation: spin 1s linear infinite; margin: 1rem auto;\n        }\n        @keyframes spin { to { transform: rotate(360deg); } }\n        .game-area { display: none; min-height: 80vh; }\n        .game-header {\n            display: flex; justify-content: space-between; align-items: center;\n            margin-bottom: 2rem; padding: 1rem; background: rgba(0,0,0,0.2); border-radius: 15px;\n        }\n        .game-info { display: flex; gap: 2rem; }\n        .info-item { text-align: center; }\n        .info-label { font-size: 0.8rem; opacity: 0.7; margin-bottom: 0.25rem; }\n        .info-value { font-size: 1.2rem; font-weight: bold; }\n        .log {\n            background: rgba(0,0,0,0.3); border-radius: 10px; padding: 1rem;\n            height: 200px; overflow-y: auto; font-family: 'Courier New', monospace;\n            font-size: 0.85rem; line-height: 1.4; margin: 1rem 0;\n        }\n        .log-entry { margin-bottom: 0.5rem; }\n        .log-info { color: #60a5fa; } .log-success { color: #34d399; }\n        .log-warning { color: #fbbf24; } .log-error { color: #f87171; }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1 class=\"title\">EPIC CARD BATTLE</h1>\n            <p class=\"subtitle\">Modern Socket.io Multiplayer Game</p>\n            <div class=\"connection-status\">\n                <div class=\"status-dot\" id=\"statusDot\"></div>\n                <span id=\"statusText\">Connecting...</span>\n            </div>\n        </div>\n\n        <div class=\"main-menu\" id=\"mainMenu\">\n            <div class=\"menu-card\">\n                <h3>‚ö° Quick Match</h3>\n                <p>Get matched instantly with another player!</p>\n                <button class=\"btn btn-primary\" onclick=\"startQuickMatch()\" disabled>Find Game</button>\n            </div>\n            <div class=\"menu-card\">\n                <h3>üè† Browse Lobbies</h3>\n                <p>Join available game rooms.</p>\n                <button class=\"btn btn-secondary\" onclick=\"showLobbies()\" disabled>Browse</button>\n            </div>\n            <div class=\"menu-card\">\n                <h3>üéÆ Create Game</h3>\n                <p>Host your own room.</p>\n                <button class=\"btn\" onclick=\"showCreateGame()\" disabled>Create</button>\n            </div>\n            <div class=\"menu-card\">\n                <h3>üîó Join by ID</h3>\n                <p>Enter a specific game ID.</p>\n                <input type=\"text\" class=\"input\" id=\"gameIdInput\" placeholder=\"Game ID\">\n                <button class=\"btn\" onclick=\"joinGameById()\" disabled>Join</button>\n            </div>\n        </div>\n\n        <div class=\"game-area\" id=\"gameArea\">\n            <div class=\"game-header\">\n                <div class=\"game-info\">\n                    <div class=\"info-item\">\n                        <div class=\"info-label\">Game ID</div>\n                        <div class=\"info-value\" id=\"currentGameId\">-</div>\n                    </div>\n                    <div class=\"info-item\">\n                        <div class=\"info-label\">Opponent</div>\n                        <div class=\"info-value\" id=\"opponentName\">-</div>\n                    </div>\n                    <div class=\"info-item\">\n                        <div class=\"info-label\">Turn</div>\n                        <div class=\"info-value\" id=\"currentTurn\">-</div>\n                    </div>\n                </div>\n                <button class=\"btn btn-secondary\" onclick=\"leaveGame()\">Leave</button>\n            </div>\n            <div class=\"game-content\">\n                <h3 style=\"text-align: center; margin: 2rem 0;\">üéÆ Game Started!</h3>\n                <p style=\"text-align: center; opacity: 0.8;\">Modern Socket.io multiplayer is working!</p>\n            </div>\n        </div>\n\n        <div class=\"log\" id=\"activityLog\"></div>\n    </div>\n\n    <!-- Modals -->\n    <div class=\"modal\" id=\"waitingModal\">\n        <div class=\"modal-content\">\n            <button class=\"close-btn\" onclick=\"closeModal('waitingModal')\">&times;</button>\n            <h3 id=\"waitingTitle\">Searching...</h3>\n            <div class=\"spinner\"></div>\n            <p id=\"waitingMessage\">Finding opponent...</p>\n            <button class=\"btn btn-secondary\" onclick=\"cancelWaiting()\">Cancel</button>\n        </div>\n    </div>\n\n    <div class=\"modal\" id=\"lobbiesModal\">\n        <div class=\"modal-content\">\n            <button class=\"close-btn\" onclick=\"closeModal('lobbiesModal')\">&times;</button>\n            <h3>üè† Game Lobbies</h3>\n            <div class=\"list\" id=\"lobbiesList\">Loading...</div>\n            <button class=\"btn\" onclick=\"refreshLobbies()\">Refresh</button>\n        </div>\n    </div>\n\n    <div class=\"modal\" id=\"createGameModal\">\n        <div class=\"modal-content\">\n            <button class=\"close-btn\" onclick=\"closeModal('createGameModal')\">&times;</button>\n            <h3>üéÆ Create Game</h3>\n            <select class=\"input\" id=\"gameModeSelect\">\n                <option value=\"Standard\">Standard</option>\n                <option value=\"Quick\">Quick Battle</option>\n                <option value=\"Tournament\">Tournament</option>\n            </select>\n            <label><input type=\"checkbox\" id=\"privateGameCheck\"> Private Game</label>\n            <button class=\"btn btn-primary\" onclick=\"createGame()\">Create</button>\n        </div>\n    </div>\n\n    <script src=\"/socket.io/socket.io.js\"></script>\n    <script>\n        const gameState = {\n            socket: null, playerId: null, playerName: null,\n            currentGameId: null, opponent: null, isInGame: false, isMyTurn: false\n        };\n\n        document.addEventListener('DOMContentLoaded', () => {\n            log('üéÆ Loading Epic Card Battle...', 'info');\n            connectToServer();\n        });\n\n        function connectToServer() {\n            log('üîå Connecting to Socket.io server...', 'info');\n            \n            gameState.socket = io();\n\n            gameState.socket.on('connect', () => {\n                log('‚úÖ Connected to server!', 'success');\n                updateConnectionStatus(true);\n                const playerName = generatePlayerName();\n                gameState.socket.emit('register', { name: playerName });\n            });\n\n            gameState.socket.on('disconnect', (reason) => {\n                log(`‚ùå Disconnected: ${reason}`, 'error');\n                updateConnectionStatus(false);\n            });\n\n            gameState.socket.on('registered', (data) => {\n                gameState.playerId = data.playerId;\n                gameState.playerName = data.playerName;\n                log(`üë§ Registered as: ${data.playerName}`, 'success');\n                document.querySelectorAll('.btn').forEach(btn => btn.disabled = false);\n            });\n\n            gameState.socket.on('searching-match', (data) => {\n                showWaitingModal('Searching...', `Queue: ${data.queuePosition}`);\n            });\n\n            gameState.socket.on('match-found', (data) => {\n                log(`‚ö° Match found! vs ${data.opponent.name}`, 'success');\n                closeModal('waitingModal');\n                setupGame(data.gameId, data.opponent, data.isHost);\n            });\n\n            gameState.socket.on('game-created', (data) => {\n                log(`üè† Game created: ${data.gameId}`, 'success');\n                closeModal('createGameModal');\n                setupGame(data.gameId, null, true);\n            });\n\n            gameState.socket.on('player-joined', (data) => {\n                if (data.player.id !== gameState.playerId) {\n                    gameState.opponent = data.player;\n                    log(`üë• ${data.player.name} joined!`, 'info');\n                    updateGameInfo();\n                }\n            });\n\n            gameState.socket.on('game-start', (data) => {\n                log('üéÆ Game starting!', 'success');\n                gameState.isMyTurn = data.firstPlayer === gameState.playerId;\n                showGameArea();\n                updateGameInfo();\n            });\n\n            gameState.socket.on('lobby-list', (data) => {\n                updateLobbiesList(data.lobbies);\n            });\n\n            gameState.socket.on('join-error', (data) => {\n                log(`‚ùå ${data.message}`, 'error');\n            });\n        }\n\n        function updateConnectionStatus(connected) {\n            const dot = document.getElementById('statusDot');\n            const text = document.getElementById('statusText');\n            if (connected) {\n                dot.classList.add('connected');\n                text.textContent = 'Connected';\n            } else {\n                dot.classList.remove('connected');\n                text.textContent = 'Disconnected';\n            }\n        }\n\n        function log(message, type = 'info') {\n            const logEl = document.getElementById('activityLog');\n            const time = new Date().toLocaleTimeString();\n            const entry = document.createElement('div');\n            entry.className = `log-entry log-${type}`;\n            entry.textContent = `[${time}] ${message}`;\n            logEl.appendChild(entry);\n            logEl.scrollTop = logEl.scrollHeight;\n        }\n\n        function startQuickMatch() {\n            gameState.socket.emit('find-quick-match');\n        }\n\n        function showLobbies() {\n            gameState.socket.emit('get-lobbies');\n            showModal('lobbiesModal');\n        }\n\n        function showCreateGame() {\n            showModal('createGameModal');\n        }\n\n        function createGame() {\n            const mode = document.getElementById('gameModeSelect').value;\n            const isPrivate = document.getElementById('privateGameCheck').checked;\n            gameState.socket.emit('create-game', { gameMode: mode, isPrivate });\n        }\n\n        function joinGameById() {\n            const gameId = document.getElementById('gameIdInput').value.trim().toUpperCase();\n            if (gameId) gameState.socket.emit('join-game', { gameId });\n        }\n\n        function joinLobby(gameId) {\n            gameState.socket.emit('join-game', { gameId });\n            closeModal('lobbiesModal');\n        }\n\n        function setupGame(gameId, opponent, isHost) {\n            gameState.currentGameId = gameId;\n            gameState.opponent = opponent;\n            gameState.isInGame = true;\n            gameState.isHost = isHost;\n            updateGameInfo();\n        }\n\n        function showGameArea() {\n            document.getElementById('mainMenu').style.display = 'none';\n            document.getElementById('gameArea').style.display = 'block';\n        }\n\n        function leaveGame() {\n            gameState.currentGameId = null;\n            gameState.opponent = null;\n            gameState.isInGame = false;\n            document.getElementById('mainMenu').style.display = 'grid';\n            document.getElementById('gameArea').style.display = 'none';\n        }\n\n        function updateGameInfo() {\n            document.getElementById('currentGameId').textContent = gameState.currentGameId || '-';\n            document.getElementById('opponentName').textContent = gameState.opponent?.name || 'Waiting...';\n            document.getElementById('currentTurn').textContent = gameState.isMyTurn ? 'Your Turn' : 'Opponent';\n        }\n\n        function showModal(id) {\n            document.getElementById(id).style.display = 'flex';\n        }\n\n        function closeModal(id) {\n            document.getElementById(id).style.display = 'none';\n        }\n\n        function showWaitingModal(title, message) {\n            document.getElementById('waitingTitle').textContent = title;\n            document.getElementById('waitingMessage').textContent = message;\n            showModal('waitingModal');\n        }\n\n        function cancelWaiting() {\n            closeModal('waitingModal');\n        }\n\n        function updateLobbiesList(lobbies) {\n            const list = document.getElementById('lobbiesList');\n            if (!lobbies.length) {\n                list.innerHTML = '<p style=\"opacity: 0.7;\">No lobbies available</p>';\n                return;\n            }\n            list.innerHTML = lobbies.map(lobby => `\n                <div class=\"list-item\">\n                    <div>\n                        <strong>üè† ${lobby.gameId}</strong><br>\n                        <small>${lobby.hostName} | ${lobby.players}/${lobby.maxPlayers} | ${lobby.waitTime}</small>\n                    </div>\n                    <button class=\"btn\" onclick=\"joinLobby('${lobby.gameId}')\">Join</button>\n                </div>\n            `).join('');\n        }\n\n        function refreshLobbies() {\n            gameState.socket.emit('get-lobbies');\n        }\n\n        function generatePlayerName() {\n            const adj = ['Epic', 'Mighty', 'Swift', 'Brave', 'Noble'];\n            const noun = ['Warrior', 'Mage', 'Knight', 'Hunter', 'Champion'];\n            return `${adj[Math.floor(Math.random() * adj.length)]}${noun[Math.floor(Math.random() * noun.length)]}${Math.floor(Math.random() * 1000)}`;\n        }\n\n        document.addEventListener('keydown', (e) => {\n            if (e.key === 'Escape') {\n                document.querySelectorAll('.modal').forEach(m => m.style.display = 'none');\n            }\n        });\n    </script>\n</body>\n</html>